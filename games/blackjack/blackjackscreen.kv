#:import Window kivy.core.window.Window
#:import dp kivy.metrics.dp

<BlackjackGameLayout>:
    canvas.before:
        Color:
            rgba: 0.8, 0.8, 0.8, 1
        Rectangle:
            pos: self.pos
            size: self.size

    orientation: 'vertical'
    spacing: dp(20)
    padding: dp(20)
    size_hint: 1, 1

    MDLabel:
        id: info_label
        text: "Welcome to Blackjack!"
        font_style: "H3"
        halign: "center"
        markup: True
        size_hint_y: None
        height: dp(100)
        opacity: 1

    MDLabel:
        id: click_to_continue
        text: "Click to Continue"
        font_style: "H5"
        halign: "center"
        size_hint_y: None
        height: dp(50)
        opacity: 1
        on_touch_down: root.deal(self)

    BoxLayout:
        orientation: 'vertical'
        size_hint_y: None
        height: self.minimum_height
        pos_hint: {"center_x": 0.5}
        spacing: dp(5)

        MDLabel:
            text: "Dealer's Cards"
            font_style: "H5"
            halign: "center"
            size_hint_y: None
            height: self.texture_size[1]
        
        MDBoxLayout:
            id: dealer_cards
            orientation: 'horizontal'
            size_hint_x: None
            width: self.minimum_width
            height: dp(150)
            spacing: dp(10)
            pos_hint: {"center_x": 0.5}

        MDLabel:
            text: "Player's Cards"
            font_style: "H5"
            halign: "center"
            size_hint_y: None
            height: self.texture_size[1]

        MDBoxLayout:
            id: player_cards
            orientation: 'horizontal'
            size_hint_x: None
            width: self.minimum_width
            height: dp(150)
            spacing: dp(10)
            pos_hint: {"center_x": 0.5}

    MDBoxLayout:
        orientation: 'vertical'
        spacing: dp(20)
        size_hint_y: None
        height: dp(320)
        pos_hint: {"center_x": 0.5}

        MDRaisedButton:
            text: 'Deal'
            font_size: dp(24)
            size_hint_x: None
            width: dp(150)
            height: dp(80)
            md_bg_color: app.theme_cls.primary_color
            on_press: root.deal(self)

        MDRaisedButton:
            text: 'Hit'
            font_size: dp(24)
            size_hint_x: None
            width: dp(150)
            height: dp(80)
            md_bg_color: 1, 0, 0, 1
            on_press: root.hit(self)

        MDRaisedButton:
            text: 'Stand'
            font_size: dp(24)
            size_hint_x: None
            width: dp(150)
            height: dp(80)
            md_bg_color: 0, 0.6, 0, 1
            on_press: root.stand(self)

        MDRaisedButton:
            text: 'Back to Menu'
            font_size: dp(24)
            size_hint_x: None
            width: dp(150)
            height: dp(80)
            md_bg_color: 0.3, 0.3, 0.3, 1
            on_press:
                app.root.current = 'menu'
                app.root.transition.direction = "up"
                root.setup()  # รีเซ็ตเกมกลับไปเริ่มใหม่

