#:import Window kivy.core.window.Window
#:import dp kivy.metrics.dp

<BlackjackGameLayout>:
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1  # Ensure the image is fully opaque
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'assets/PlayingCards/back6.jpeg'  # Path to your background image

    orientation: 'vertical'
    spacing: dp(20)
    padding: dp(20)
    size_hint: 1, 1

    MDLabel:
        id: info_label
        text: "Welcome to Blackjack!"
        font_style: "H3"
        halign: "center"
        markup: True
        size_hint_y: None
        height: dp(100)
        opacity: 1
        canvas.before:
            Color:
                rgba: 1, 0, 0, 1  # Red border
            Line:
                rectangle: self.x, self.y, self.width, self.height
                width: 2

    MDLabel:
        id: click_to_continue
        text: "Click to Continue"
        font_style: "H5"
        halign: "center"
        size_hint_y: None
        height: dp(50)
        opacity: 1
        on_touch_down: root.deal(self)
        canvas.before:
            Color:
                rgba: 0, 1, 0, 1  # Green border
            Line:
                rectangle: self.x, self.y, self.width, self.height
                width: 2

    BoxLayout:
        orientation: 'vertical'
        size_hint_y: None
        height: self.minimum_height
        pos_hint: {"center_x": 0.5}
        spacing: dp(50)
        canvas.before:
            Color:
                rgba: 0, 0, 1, 1  # Blue border
            Line:
                rectangle: self.x, self.y, self.width, self.height
                width: 2

        MDLabel:
            text: "Dealer's Cards"
            font_style: "H5"
            halign: "center"
            size_hint_y: None
            height: self.texture_size[1]
            canvas.before:
                Color:
                    rgba: 1, 1, 0, 1  # Yellow border
                Line:
                    rectangle: self.x, self.y, self.width, self.height
                    width: 2
        
        MDBoxLayout:
            id: dealer_cards
            orientation: 'horizontal'
            size_hint_x: 1
            height: dp(150)
            spacing: dp(10)
            pos_hint: {"center_x": 0.5}
            canvas.before:
                Color:
                    rgba: 1, 0, 1, 1  # Magenta border
                Line:
                    rectangle: self.x, self.y, self.width, self.height
                    width: 2

        MDLabel:
            text: "Player's Cards"
            font_style: "H5"
            halign: "center"
            size_hint_y: None
            height: self.texture_size[1]
            canvas.before:
                Color:
                    rgba: 0, 1, 1, 1  # Cyan border
                Line:
                    rectangle: self.x, self.y, self.width, self.height
                    width: 2

        MDBoxLayout:
            id: player_cards
            orientation: 'horizontal'
            size_hint_x: 1
            height: dp(150)
            spacing: dp(10)
            pos_hint: {"center_x": 0.5}
            canvas.before:
                Color:
                    rgba: 1, 0.5, 0, 1  # Orange border
                Line:
                    rectangle: self.x, self.y, self.width, self.height
                    width: 2

    MDBoxLayout:
        orientation: 'vertical'
        spacing: dp(20)
        size_hint_y: None
        height: dp(320)
        pos_hint: {"center_x": 0.5}
        canvas.before:
            Color:
                rgba: 0.5, 0, 0.5, 1  # Purple border
            Line:
                rectangle: self.x, self.y, self.width, self.height
                width: 2

        MDRaisedButton:
            text: 'Deal'
            font_size: dp(24)
            size_hint_x: None
            width: dp(150)
            height: dp(80)
            md_bg_color: app.theme_cls.primary_color
            on_press: root.deal(self)
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0.5, 1  # Gray border
                Line:
                    rectangle: self.x, self.y, self.width, self.height
                    width: 2

        MDRaisedButton:
            text: 'Hit'
            font_size: dp(24)
            size_hint_x: None
            width: dp(150)
            height: dp(80)
            md_bg_color: 1, 0, 0, 1
            on_press: root.hit(self)
            canvas.before:
                Color:
                    rgba: 0.5, 0.5, 0, 1  # Olive border
                Line:
                    rectangle: self.x, self.y, self.width, self.height
                    width: 2

        MDRaisedButton:
            text: 'Stand'
            font_size: dp(24)
            size_hint_x: None
            width: dp(150)
            height: dp(80)
            md_bg_color: 0, 0.6, 0, 1
            on_press: root.stand(self)
            canvas.before:
                Color:
                    rgba: 0, 0.5, 0.5, 1  # Teal border
                Line:
                    rectangle: self.x, self.y, self.width, self.height
                    width: 2

        MDRaisedButton:
            text: 'Back to Menu'
            font_size: dp(24)
            size_hint_x: None
            width: dp(150)
            height: dp(80)
            md_bg_color: 0.3, 0.3, 0.3, 1
            on_press:
                app.root.current = 'menu'
                app.root.transition.direction = "up"
                root.setup()  # รีเซ็ตเกมกลับไปเริ่มใหม่
            canvas.before:
                Color:
                    rgba: 0.5, 0, 0, 1  # Maroon border
                Line:
                    rectangle: self.x, self.y, self.width, self.height
                    width: 2

